<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/iron-overlay-behavior/iron-overlay-behavior.html">

<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<link rel="import" href="./generic/app-localize-behavior.html">
<link rel="import" href="./generic/app-tag-manager-behaviour.html">

<dom-module id="planet-kiosk-basket-authentification">
  <template>
    <style include="planet-kiosk-page-styles planet-kiosk-popin-styles">
      .message {
        font-size: 4em;
        font-family: var(--planet-font-family-book);
        color: var(--planet-color-theme-message);
        text-align: center;
        margin: 2em 0 0 0;
      }

      .number {
        font-size: 7em;
        font-family: var(--planet-font-family-heavy);
        color: var(--planet-color-theme-information);
        text-align: center;
        font-weight: bold;
        margin: 0.5em 0 1em 0;
      }
    </style>

    <img src="../../images/lock.png">

    <p class="message">[[message]]</p>
    <p class="number">[[number]]</p>

    <div class="buttons">
      <paper-button class="primary cancel" on-tap="_cancel">[[localize('login_bis_cancel_button')]]</paper-button>
      <paper-button class="primary confirm" on-tap="_confirm">[[localize('login_bis_confirm_button')]]</paper-button>
    </div>

  </template>

  <script>
    Polymer({
      is: 'planet-kiosk-basket-authentification',
      behaviors: [
        AppLocalizeBehavior,
        TagManagerBehavior,
        Polymer.IronOverlayBehavior
      ],
      properties: {
        number: String,
        message: String
      },
      _cancel: function () {
        this.close();
        this.trackEvent('Basket', 'cottage validation', 'fail', 'noevent');
        var identification = document.querySelector('planet-kiosk-identification');
        identification.set('action', 'payment');
        globals.router.set('route.path', '/identification');
      },
      _confirm : function () {
        this.close();
        this.trackEvent('Basket', 'cottage validation', 'success', 'noevent');
        this.fire('do-payment');
      }
    });

  </script>
</dom-module>